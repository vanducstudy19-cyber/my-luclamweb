<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>L·ª•c Lam - Qu·∫£n L√Ω Xu·∫•t Kho</title>
   <link rel="icon" type="image/png" href="/image/[Icon] Logo Tr·∫Øng.jpg">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #e2f0ff;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      color: #2c3e50;
    }
    header {
      text-align: center;
      margin-bottom: 20px;
    }
    header img.logo {
      height: 70px;
      margin-bottom: 10px;
    }
    header h1 {
      font-weight: 700;
      font-size:20ren;
      color: #3b82f6;
    }
    .card-ll {
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.06);
      border: none;
    }
    h3 {
      font-weight: 600;
      color: #2c3e50;
    }
    table thead {
      background: #3a7ca5;
      color: white;
    }
    .btn-ll {
      background: #6bb8de;
      color: white;
      border-radius: 10px;
      font-weight: 500;
      transition: 0.2s;
    }
    .btn-ll:hover {
      background: #3a7ca5;
    }
    .logo{
        border: 1px solid rgba(96, 169, 247, 0.2); /* vi·ªÅn m·ªù xanh nh·∫°t */
        box-shadow: 0 0 15px rgba(0, 123, 255, 0.4); /* hi·ªáu ·ª©ng ph√°t s√°ng */
        backdrop-filter: blur(6px);       /* t·∫°o hi·ªáu ·ª©ng k√≠nh m·ªù (glass) */
    }
  </style>
</head>
<body class="container py-4">

  <!-- Header -->
  <header>
    <img src="image/[Icon] Logo Tr·∫Øng.jpg" alt="Logo L·ª•c Lam" class="logo rounded-circle">
    <h1>üì¶ L·ª•c Lam - Qu·∫£n L√Ω Xu·∫•t Kho - 163 Hu·ª≥nh VƒÉn B√°nh</h1>
  </header>

  <!-- Banner Xu·∫•t kho -->
 <div class="d-flex justify-content-center my-3">
  <img src="image/kiemkho.jpg" alt="Xu·∫•t kho" class="img-fluid rounded shadow" style="max-width: 100%;">
</div>

  <!-- Form xu·∫•t kho -->
  <form id="exportForm" class="card-ll p-4 bg-white mb-4">
    <h3>Xu·∫•t kho t·∫°i ƒë√¢y</h3>
    <div class="row g-3">
      <div class="col-md-3">
        <label class="form-label">üìÖ Ng√†y (dd/mm/yyyy)</label>
        <input type="text" class="form-control" id="exportDate" required>
      </div>
      <div class="col-md-3">
        <label class="form-label">ü•¨ Nguy√™n li·ªáu</label>
        <select class="form-select" id="item" required>
          <option value="">-- Ch·ªçn nguy√™n li·ªáu --</option>
          <option value="">-- Ch·ªçn m·∫∑t h√†ng --</option>
            <option>Tr√¢n Ch√¢u Olong Nh√†i</option>
            <option>Mu·ªëi</option>
            <option>Tr√¢n Ch√¢u ƒêen D·∫ªo</option>
            <option>Atiso ƒê·ªè</option>
            <option>C·ªët Hoa D√¢m B·ª•t</option>
            <option>C·ªët Lava</option>
            <option>ƒê∆∞·ªùng C√°t</option>
            <option>Tr√† B√° T∆∞·ªõc 500gr</option>
            <option>Tr√† Chai 500gr</option>
            <option>Tr√† Lavender 60gr</option>
            <option>Tr√† Olong Hoa H·ªìng 500gr</option>
            <option>Tr√† Red Lava 500gr</option>
            <option>Tr√† Olong Hoa Nh√†i 500gr</option>
            <option>B·ªôt S·ªØa 1 kg</option>
            <option>Ly gi·∫•y in 2 l·ªõp</option>
            <option>Ly trong</option>
            <option>Tr√† ƒê√†o 500gr</option>
            <option>Tr√† Olong C√°m 500gr</option>
            <option>Tr√† Caramel 500gr</option>
            <option>Tr√† Olong Qu·∫ø M·ªôc 500gr</option>
            <option>Combo C√∫c</option>
            <option>ƒê√†o Lon</option>
            <option>V·∫£i Lon</option>
            <option>N∆∞∆°c c·ªët Chanh 5 l√≠t</option>
            <option>N∆∞·ªõc c·ªët T·∫Øc 5 l√≠t</option>
            <option>Ly c√† ph√™</option>
            <option>N∆∞·ªõc ƒë∆∞·ªùng 20L/ th√πng</option>
            <option>Sirup Sakura Kh√¥ng Chua</option>
            <option>Sirup Sakura Chua</option>
            <option>Sirup V·∫£i</option>
            <option>M·ª©t Sakura</option>
            <option>B·ªôt Matcha</option>
            <option>S·ªØa t∆∞∆°i 1L</option>
            <option>Kem b√©o (R√≠ch L√πn)</option>
            <option>Tr√¢n ch√¢u Olong</option>
            <option>Tr√¢n ch√¢u Matha Ph√¥ Mai</option>
            <option>Tr√¢n ch√¢u Sakura</option>
            <option>TR√¢n ch√¢u Tr·∫Øng</option>
            <option>Th·∫°ch C·ªß NƒÉng H·ªìng</option>
            <option>C√† Ph√™ Xay</option>
            <option>S·ªØa ƒë·∫∑c Ph∆∞∆°ng Nam</option>
        </select>
      </div>
      <div class="col-md-2">
        <label class="form-label">‚öñÔ∏è ƒê∆°n v·ªã</label>
        <select class="form-select" id="unit" required>
          <option value="">-- Ch·ªçn ƒë∆°n v·ªã --</option>
            <option>B·ªãch</option>
            <option>C√°i</option>
            <option>H·ªôp</option>
            <option>Can</option>
            <option>Chai</option>
        </select>
      </div>
      <div class="col-md-2">
        <label class="form-label">üî¢ S·ªë l∆∞·ª£ng</label>
        <input type="number" class="form-control" id="quantity" required>
      </div>
      <div class="col-md-2 d-flex align-items-end">
        <button type="submit" class="btn-ll w-100">Xu·∫•t kho</button>
      </div>
    </div>
    <div id="exportError" class="alert alert-danger mt-3 d-none">
      ‚ùå Ng√†y kh√¥ng h·ª£p l·ªá ho·∫∑c thi·∫øu th√¥ng tin!
    </div>
  </form>

  <!-- B·∫£ng l·ªãch s·ª≠ -->
  <div class="card-ll p-4 bg-white">
    <h3 class="mb-3">üìë L·ªãch s·ª≠ xu·∫•t kho</h3>
    <table id="exportTable" class="table table-bordered table-hover mb-0">
      <thead>
        <tr>
          <th>Ng√†y</th>
          <th>Nguy√™n li·ªáu</th>
          <th>ƒê∆°n v·ªã</th>
          <th>S·ªë l∆∞·ª£ng</th>
          <th>Thao t√°c</th>
        </tr>
      </thead>
      <tbody>
        <!-- d·ªØ li·ªáu load t·ª´ localStorage -->
      </tbody>
    </table>
  </div>

  <script>
    const STORAGE_KEY = 'll_export_history_v1';
    const exportForm = document.getElementById('exportForm');
    const exportTableBody = document.querySelector('#exportTable tbody');
    const exportError = document.getElementById('exportError');

    // Check ng√†y dd/mm/yyyy
    function parseDDMMYYYY(str){
      const m = str.trim().match(/^([0-3]?\d)\/(0?\d|1[0-2])\/(\d{4})$/);
      if(!m) return {valid:false};
      let d = parseInt(m[1],10),
          mo = parseInt(m[2],10),
          y = parseInt(m[3],10);
      const dt = new Date(y, mo-1, d);
      if(dt.getFullYear()===y && dt.getMonth()===mo-1 && dt.getDate()===d){
        return {valid:true, d, m:mo, y, date:dt};
      }
      return {valid:false};
    }

    function loadExportHistory(){
      exportTableBody.innerHTML = "";
      const data = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
      data.forEach((row, i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${row.date}</td>
          <td>${row.item}</td>
          <td>${row.unit}</td>
          <td>${row.quantity}</td>
          <td><button class="btn btn-sm btn-danger" onclick="deleteRow(${i})">‚ùå Xo√°</button></td>
        `;
        exportTableBody.appendChild(tr);
      });
    }

    exportForm.addEventListener("submit", e=>{
      e.preventDefault();
      const dateStr = document.getElementById("exportDate").value;
      const item = document.getElementById("item").value;
      const unit = document.getElementById("unit").value;
      const qty = document.getElementById("quantity").value;

      const parsed = parseDDMMYYYY(dateStr);
      if(!parsed.valid || !item || !unit || !qty){
        exportError.classList.remove("d-none");
        return;
      }
      exportError.classList.add("d-none");

      const newRow = {date:dateStr, item, unit, quantity:qty};
      const data = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
      data.push(newRow);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
      loadExportHistory();
      exportForm.reset();
    });

    function deleteRow(index){
      const data = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
      data.splice(index,1);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
      loadExportHistory();
    }

    window.addEventListener("DOMContentLoaded", loadExportHistory);
  </script>
</body>
</html>
